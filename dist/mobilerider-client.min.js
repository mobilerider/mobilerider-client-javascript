/* Mobilerider API Client v1.6.2 | (c) 2019 Mobilerider Networks LLC. */
!function(exports,undefined){"use strict";var Requests=function(undefined){function succeed(a){var b=protocolRe.exec(a.url);return b=b&&b[1]||window.location.protocol,httpsRe.test(b)?twoHundo.test(a.request.status):!!a.request.response}function handleReadyState(a,b,c){return function(){return a._aborted?c(a.request):a._timedOut?c(a.request,"Request is aborted: timeout"):void(a.request&&4==a.request[readyState]&&(a.request.onreadystatechange=noop,succeed(a)?b(a.request):c(a.request)))}}function setHeaders(a,b){var c,d=b.headers||{};d.Accept=d.Accept||defaultHeaders.accept[b.type]||defaultHeaders.accept["*"];var e="function"==typeof FormData&&b.data instanceof FormData;b.crossOrigin||d[requestedWith]||(d[requestedWith]=defaultHeaders.requestedWith),d[contentType]||e||(d[contentType]=b.contentType||defaultHeaders.contentType);for(c in d)d.hasOwnProperty(c)&&"setRequestHeader"in a&&a.setRequestHeader(c,d[c])}function setCredentials(a,b){void 0!==b.withCredentials&&void 0!==a.withCredentials&&(a.withCredentials=!!b.withCredentials)}function generalCallback(a){lastValue=a}function urlappend(a,b){return a+(/\?/.test(a)?"&":"?")+b}function handleJsonp(a,b,c,d){var e=uniqid++,f=a.jsonpCallback||"callback",g=a.jsonpCallbackName||reqwest.getcallbackPrefix(e),h=new RegExp("((^|\\?|&)"+f+")=([^&]+)"),i=d.match(h),j=doc.createElement("script"),k=0,l=-1!==navigator.userAgent.indexOf("MSIE 10.0");return i?"?"===i[3]?d=d.replace(h,"$1="+g):g=i[3]:d=urlappend(d,f+"="+g),win[g]=generalCallback,j.type="text/javascript",j.src=d,j.async=!0,void 0===j.onreadystatechange||l||(j.htmlFor=j.id="_reqwest_"+e),j.onload=j.onreadystatechange=function(){if(j[readyState]&&"complete"!==j[readyState]&&"loaded"!==j[readyState]||k)return!1;j.onload=j.onreadystatechange=null,j.onclick&&j.onclick(),b(lastValue),lastValue=undefined,head.removeChild(j),k=1},head.appendChild(j),{abort:function(){j.onload=j.onreadystatechange=null,c({},"Request is aborted: timeout",{}),lastValue=undefined,head.removeChild(j),k=1}}}function getRequest(a,b){var c,d=this.o,e=(d.method||"GET").toUpperCase(),f="string"==typeof d?d:d.url,g=!1!==d.processData&&d.data&&"string"!=typeof d.data?reqwest.toQueryString(d.data):d.data||null,h=!1;return"jsonp"!=d.type&&"GET"!=e||!g||(f=urlappend(f,g),g=null),"jsonp"==d.type?handleJsonp(d,a,b,f):(c=d.xhr&&d.xhr(d)||xhr(d),c.open(e,f,!1!==d.async),setHeaders(c,d),setCredentials(c,d),win[xDomainRequest]&&c instanceof win[xDomainRequest]?(c.onload=a,c.onerror=b,c.onprogress=function(){},h=!0):c.onreadystatechange=handleReadyState(this,a,b),d.before&&d.before(c),h?setTimeout(function(){c.send(g)},200):c.send(g),c)}function Reqwest(a,b){this.o=a,this.fn=b,init.apply(this,arguments)}function setType(a){return a.match("json")?"json":a.match("javascript")?"js":a.match("text")?"html":a.match("xml")?"xml":void 0}function init(o,fn){function complete(a){for(o.timeout&&clearTimeout(self.timeout),self.timeout=null;self._completeHandlers.length>0;)self._completeHandlers.shift()(a)}function success(resp){var type=o.type||resp&&setType(resp.getResponseHeader("Content-Type"));resp="jsonp"!==type?self.request:resp;var filteredResponse=globalSetupOptions.dataFilter(resp.responseText,type),r=filteredResponse;try{resp.responseText=r}catch(e){}if(r)switch(type){case"json":try{resp=win.JSON?win.JSON.parse(r):eval("("+r+")")}catch(err){return error(resp,"Could not parse JSON in response",err)}break;case"js":resp=eval(r);break;case"html":resp=r;break;case"xml":resp=resp.responseXML&&resp.responseXML.parseError&&resp.responseXML.parseError.errorCode&&resp.responseXML.parseError.reason?null:resp.responseXML}for(self._responseArgs.resp=resp,self._fulfilled=!0,fn(resp),self._successHandler(resp);self._fulfillmentHandlers.length>0;)resp=self._fulfillmentHandlers.shift()(resp);complete(resp)}function timedOut(){self._timedOut=!0,self.request.abort()}function error(a,b,c){for(a=self.request,self._responseArgs.resp=a,self._responseArgs.msg=b,self._responseArgs.t=c,self._erred=!0;self._errorHandlers.length>0;)self._errorHandlers.shift()(a,b,c);complete(a)}this.url="string"==typeof o?o:o.url,this.timeout=null,this._fulfilled=!1,this._successHandler=function(){},this._fulfillmentHandlers=[],this._errorHandlers=[],this._completeHandlers=[],this._erred=!1,this._responseArgs={};var self=this;fn=fn||function(){},o.timeout&&(this.timeout=setTimeout(function(){timedOut()},o.timeout)),o.success&&(this._successHandler=function(){o.success.apply(o,arguments)}),o.error&&this._errorHandlers.push(function(){o.error.apply(o,arguments)}),o.complete&&this._completeHandlers.push(function(){o.complete.apply(o,arguments)}),this.request=getRequest.call(this,success,error)}function reqwest(a,b){return new Reqwest(a,b)}function normalize(a){return a?a.replace(/\r?\n/g,"\r\n"):""}function serial(a,b){var c,d,e,f,g=a.name,h=a.tagName.toLowerCase(),i=function(a){a&&!a.disabled&&b(g,normalize(a.attributes.value&&a.attributes.value.specified?a.value:a.text))};if(!a.disabled&&g)switch(h){case"input":/reset|button|image|file/i.test(a.type)||(c=/checkbox/i.test(a.type),d=/radio/i.test(a.type),e=a.value,(!(c||d)||a.checked)&&b(g,normalize(c&&""===e?"on":e)));break;case"textarea":b(g,normalize(a.value));break;case"select":if("select-one"===a.type.toLowerCase())i(a.selectedIndex>=0?a.options[a.selectedIndex]:null);else for(f=0;a.length&&f<a.length;f++)a.options[f].selected&&i(a.options[f])}}function eachFormElement(){var a,b,c=this,d=function(a,b){var d,e,f;for(d=0;d<b.length;d++)for(f=a[byTag](b[d]),e=0;e<f.length;e++)serial(f[e],c)};for(b=0;b<arguments.length;b++)a=arguments[b],/input|select|textarea/i.test(a.tagName)&&serial(a,c),d(a,["input","select","textarea"])}function serializeQueryString(){return reqwest.toQueryString(reqwest.serializeArray.apply(null,arguments))}function serializeHash(){var a={};return eachFormElement.apply(function(b,c){b in a?(a[b]&&!isArray(a[b])&&(a[b]=[a[b]]),a[b].push(c)):a[b]=c},arguments),a}function buildParams(a,b,c,d){var e,f,g,h=/\[\]$/;if(isArray(b))for(f=0;b&&f<b.length;f++)g=b[f],c||h.test(a)?d(a,g):buildParams(a+"["+("object"==typeof g?f:"")+"]",g,c,d);else if(b&&"[object Object]"===b.toString())for(e in b)buildParams(a+"["+e+"]",b[e],c,d);else d(a,b)}var win=window,doc=document,httpsRe=/^http/,protocolRe=/(^\w+):\/\//,twoHundo=/^(20\d|1223)$/,byTag="getElementsByTagName",readyState="readyState",contentType="Content-Type",requestedWith="X-Requested-With",head=doc[byTag]("head")[0],uniqid=0,callbackPrefix="reqwest_"+ +new Date,lastValue,xmlHttpRequest="XMLHttpRequest",xDomainRequest="XDomainRequest",noop=function(){},isArray="function"==typeof Array.isArray?Array.isArray:function(a){return a instanceof Array},defaultHeaders={contentType:"application/x-www-form-urlencoded",requestedWith:xmlHttpRequest,accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"}},xhr=function(a){if(!0===a.crossOrigin){var b=win[xmlHttpRequest]?new XMLHttpRequest:null;if(b&&"withCredentials"in b)return b;if(win[xDomainRequest])return new XDomainRequest;throw new Error("Browser does not support cross-origin requests")}return win[xmlHttpRequest]?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")},globalSetupOptions={dataFilter:function(a){return a}};return Reqwest.prototype={abort:function(){this._aborted=!0,this.request.abort()},retry:function(){init.call(this,this.o,this.fn)},then:function(a,b){return a=a||function(){},b=b||function(){},this._fulfilled?this._responseArgs.resp=a(this._responseArgs.resp):this._erred?b(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):(this._fulfillmentHandlers.push(a),this._errorHandlers.push(b)),this},always:function(a){return this._fulfilled||this._erred?a(this._responseArgs.resp):this._completeHandlers.push(a),this},fail:function(a){return this._erred?a(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):this._errorHandlers.push(a),this},catch:function(a){return this.fail(a)}},reqwest.serializeArray=function(){var a=[];return eachFormElement.apply(function(b,c){a.push({name:b,value:c})},arguments),a},reqwest.serialize=function(){if(0===arguments.length)return"";var a,b,c=Array.prototype.slice.call(arguments,0);return a=c.pop(),a&&a.nodeType&&c.push(a)&&(a=null),a&&(a=a.type),b="map"==a?serializeHash:"array"==a?reqwest.serializeArray:serializeQueryString,b.apply(null,c)},reqwest.toQueryString=function(a,b){var c,d,e=b||!1,f=[],g=encodeURIComponent,h=function(a,b){b="function"==typeof b?b():null==b?"":b,f[f.length]=g(a)+"="+g(b)};if(isArray(a))for(d=0;a&&d<a.length;d++)h(a[d].name,a[d].value);else for(c in a)a.hasOwnProperty(c)&&buildParams(c,a[c],e,h);return f.join("&").replace(/%20/g,"+")},reqwest.getcallbackPrefix=function(){return callbackPrefix},reqwest.compat=function(a,b){return a&&(a.type&&(a.method=a.type)&&delete a.type,a.dataType&&(a.type=a.dataType),a.jsonpCallback&&(a.jsonpCallbackName=a.jsonpCallback)&&delete a.jsonpCallback,a.jsonp&&(a.jsonpCallback=a.jsonp)),new Reqwest(a,b)},reqwest.ajaxSetup=function(a){a=a||{};for(var b in a)globalSetupOptions[b]=a[b]},reqwest}(),Promises=function(a){function b(a){l(function(){throw a})}function c(b){return this.then(b,a)}function d(b){return this.then(a,b)}function e(b,c){return this.then(function(a){return m(b)?b.apply(null,n(a)?a:[a]):v.onlyFuncs?a:b},c||a)}function f(a){function b(){a()}return this.then(b,b),this}function g(a){return this.then(function(b){return m(a)?a.apply(null,n(b)?b.splice(0,0,undefined)&&b:[undefined,b]):v.onlyFuncs?b:a},function(b){return a(b)})}function h(c){return this.then(a,c?function(a){throw c(a),a}:b)}function i(a,b){var c=q(a);if(1===c.length&&n(c[0])){if(!c[0].length)return v.fulfilled([]);c=c[0]}var d=[],e=v(),f=c.length;if(f)for(var g=function(a){c[a]=v.promisify(c[a]),c[a].then(function(g){d[a]=b?c[a]:g,--f||e.resolve(d)},function(g){b?(d[a]=c[a],--f||e.resolve(d)):e.reject(g)})},h=0,i=f;h<i;h++)g(h);else e.resolve(d);return e.promise}function j(a,b){return a.then(m(b)?b:function(){return b})}function k(a){var b=q(a);1===b.length&&n(b[0])&&(b=b[0]);for(var c=v(),d=0,e=b.length,f=v.resolved();d<e;d++)f=j(f,b[d]);return c.resolve(f),c.promise}var l,m=function(a){return"function"==typeof a},n=function(a){return Array.isArray?Array.isArray(a):a instanceof Array},o=function(a){return!(!a||!(typeof a).match(/function|object/))},p=function(b){return!1===b||b===a||null===b},q=function(a,b){return[].slice.call(a,b)},r="undefined",s=typeof TypeError===r?Error:TypeError;if(typeof process!==r&&process.nextTick)l=process.nextTick;else if(typeof MessageChannel!==r){var t=new MessageChannel,u=[];t.port1.onmessage=function(){u.length&&u.shift()()},l=function(a){u.push(a),t.port2.postMessage(0)}}else l=function(a){setTimeout(a,0)};var v=function(b){function i(){if(0!==r){var a,b=t,c=0,d=b.length,e=~r?0:1;for(t=[];c<d;c++)(a=b[c][e])&&a(n)}}function j(a){function b(a){return function(b){return c?undefined:(c=!0,a(b))}}var c=!1;if(r)return this;try{var d=o(a)&&a.then;if(m(d)){if(a===u)throw new s("Promise can't resolve itself");return d.call(a,b(j),b(k)),this}}catch(e){return b(k)(e),this}return q(function(){n=a,r=1,i()}),this}function k(a){return r||q(function(){try{throw a}catch(b){n=b}r=-1,i()}),this}var n,q=(a!==b?b:v.alwaysAsync)?l:function(a){a()},r=0,t=[],u={then:function(a,b){var c=v();return t.push([function(b){try{p(a)?c.resolve(b):c.resolve(m(a)?a(b):v.onlyFuncs?b:a)}catch(d){c.reject(d)}},function(a){if((p(b)||!m(b)&&v.onlyFuncs)&&c.reject(a),b)try{c.resolve(m(b)?b(a):b)}catch(d){c.reject(d)}}]),0!==r&&q(i),c.promise},success:c,error:d,otherwise:d,apply:e,spread:e,ensure:f,nodify:g,rethrow:h,isPending:function(){return 0===r},getStatus:function(){return r},done:c,fail:d,always:f};return u.toSource=u.toString=u.valueOf=function(){return n===a?this:n},{promise:u,resolve:j,fulfill:j,reject:k}};return v.deferred=v.defer=v,v.nextTick=l,v.alwaysAsync=!0,v.onlyFuncs=!0,v.resolved=v.fulfilled=function(a){return v(!0).resolve(a).promise},v.rejected=function(a){return v(!0).reject(a).promise},v.wait=function(a){var b=v();return setTimeout(b.resolve,a||0),b.promise},v.delay=function(a,b){var c=v();return setTimeout(function(){try{c.resolve(m(a)?a.apply(null):a)}catch(b){c.reject(b)}},b||0),c.promise},v.promisify=function(a){return a&&m(a.then)?a:v.resolved(a)},v.all=function(){return i(arguments,!1)},v.resolveAll=function(){return i(arguments,!0)},v.sequence=function(){return k(arguments)},v.nodeCapsule=function(a,b){return b||(b=a,a=void 0),function(){var c=v(),d=q(arguments);d.push(function(a,b){a?c.reject(a):c.resolve(arguments.length>2?q(arguments,1):b)});try{b.apply(a,d)}catch(e){c.reject(e)}return c.promise}},{defer:v}}(),Settings=function(){return{endpointPrefix:"https://api.mobilerider.com/api"}}(),Utils=function(){var a=Array.prototype.forEach,b=Array.isArray,c=Array.prototype.some,d=Object.prototype.toString,e=Array.prototype.map,f=Array.prototype.slice,g=b||function(a){return"[object Array]"==d.call(obj)},h={},i=function(a){return a===Object(a)},j=function(a){return f.apply(a,f.call(arguments,1))},k=function(a){return void 0===a},l=function(a){return"string"==typeof a},m=Object.keys||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b},n=function(b,c,d){if(null!==b&&!k(b)){var e,f;if(a&&b.forEach===a)b.forEach(c,d);else if(b.length===+b.length){for(e=0,f=b.length;e<f;e++)if(c.call(d,b[e],e,b)===h)return}else{var g=m(b);for(e=0,f=g.length;e<f;e++)c.call(d,b[g[e]],g[e],b)}}},o=function(a){return n(j(arguments,1),function(b){if(b)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])}),a},p=function(a){return a},q=function(a,b,d){b=b||p;var e=!1;return null===a||void 0===a||!1===a?e:c&&a.some===c?a.some(b,d):(n(a,function(a,c,f){if(e||(e=b.call(d,a,c,f)))return h}),!!e)};return{slice:j,extend:o,each:n,keys:m,isArray:g,isObject:i,any:q,some:q,map:function(a,b,c){b=b||p;var d=[];return null===a||void 0===a||!1===a?d:e&&a.map===e?a.map(b,c):(n(a,function(a,e,f){d.push(b.call(c,a,e,f))}),d)},undef:k,isstr:l}}(),Client=function(){var a=function(a){var b,c=this;if(a=c.options=Utils.extend({},a||{}),b=a.endpointPrefix||Settings.endpointPrefix,"/"!=b[b.length-1]&&(b+="/"),a.endpointPrefix=b,!(a.token||a.appId&&a.appSecret))throw new Error("You must provide `token` or `appId` and `appSecret` in the options.")};return a.prototype._getRequestHeaders=function(){var a,b=this,c=b.options;return a=c.token?{Authorization:"Bearer "+c.token}:{Authorization:"Basic "+btoa(unescape(encodeURIComponent(c.appId+":"+c.appSecret)))},c.subVendorAppId&&(a["X-Vendor-App-Id"]=c.subVendorAppId),a},a.prototype.resolvePromise=function(a,b,c){var d=this,e=c&&c.length?Utils.map(c):["success","object","objects"],f=function(a){var b={meta:{}};return Utils.each(a,function(c,d){"meta"!=d?-1!=e.indexOf(d)?b[d]=c:b.meta[d]=c:Utils.each(a.meta,function(a,c){b.meta[c]=a})}),b};return Utils.isArray(b)?a.resolve(f({success:!0,objects:b})):d.options.trustStatusCode?(b.success=b.success||!0,a.resolve(f(b))):Utils.isObject(b)?b.success?a.resolve(f(b)):a.reject(f(b)):a.reject(f({success:!1,meta:{status:"Invalid response from the server",response:b+""}})),a},a.prototype.rejectPromiseFromXhr=function(a,b){var c,d;try{c=JSON.parse(b.responseText)}catch(e){c={}}return d=c.meta=c.meta||{},d.statusCode=b.status,d.statusText=b.statusText,d.responseText=b.responseText,a.reject(c),a},a.prototype.request=function(a){var b,c,d=this,e=d.options.trailingSlash;a=a||{};var f,g=["url","method"];for(f=g.length-1;f>=0;f--)if(!a.hasOwnProperty(g[f]))throw new Error("Missing the `"+g[f]+"` parameter");if(!(b=a.url))throw new Error("Empty URL");"/"==b[0]&&(b=b.substr(1));var h=b.length-1;if(!0===e&&"/"!=b[h]&&(b+="/"),!1===e&&"/"==b[h]&&(b=b.substr(0,h)),a.url=d.options.endpointPrefix+b,c=(""+a.method).toUpperCase(),-1==["GET","POST","PUT","PATCH","DELETE"].indexOf(c))throw new Error("Invalid method: "+(c||"<empty>"));a.method=c,a=Utils.extend({type:"json",contentType:"application/json",headers:d._getRequestHeaders()},a);var i=Promises.defer();return Requests(a).then(function(a){d.resolvePromise(i,a)},function(a){d.rejectPromiseFromXhr(i,a)}),i.promise},a}(),Query=function(){var a=["exact","iexact","contains","icontains","in","gt","gte","lt","lte","startswith","istartswith","endswith","iendswith","range","year","month","day","week_day","hour","minute","second","isnull","search","regex","iregex"],b={};Utils.each(a,function(a){b[a]=!0});var c=["number","string","boolean"],d=function a(b){if(Utils.isArray(b))return Utils.map(b,function(b){return a(b)});if(Utils.isObject(b)){var d;return b instanceof f?d=new f(b.name,a(b.filters)):(d={},Utils.each(b,function(b,c){d[c]=a(b)})),d}return-1==c.indexOf(typeof b)?Object.prototype.toString.call(b):b},e=function(a,b){var c;if(1==arguments.length)c=a;else{if(2!=arguments.length)throw new TypeError("Wrong argument count");c=[a,b]}var d={};return d[c[0]]=c[1],d},f=function(a,b){if("AND"!=(a=a.toUpperCase())&&"OR"!=a&&"NOT"!=a)throw new TypeError("Operator: Invalid operator name: "+a);var c=b&&b.length==+b.length;if(!Utils.undef(b)&&c&&Utils.isstr(b))throw new TypeError("If present the `filters` parameter must be an Array");this.name=a,this.filters=[],this.addFilters(b||[])};f.prototype.clone=function(){return new f(this.name,d(this.filters))},f.prototype.validateField=function(a){var c=a.split("__");if(Utils.any(Utils.slice(c,0,-1),function(a,c){return!!b[a]}))throw new TypeError("Field lookups can only be at the end if present. Got: "+a);if(1==c.length&&b[c[0]])throw new TypeError("Invalid field name: "+c[0]);return!0},f.prototype.addFilters=function(a){var b=this,c=[];Utils.each(a,function(a,d){if(Utils.isArray(a)){if(2!=a.length)throw new TypeError('Filters must be in the form of `["field_name", "filter_value"]`. Got: '+a.toString());b.validateField(a[0]),c.push(e(a))}else if(a instanceof f)c.push(a.clone());else if(Utils.isstr(d))b.validateField(d),c.push(e(d,a));else{if(!Utils.isObject(a))throw new TypeError("Invalid filter: "+JSON.stringify(a));Utils.each(a,function(a,d){b.validateField(d),c.push(e(d,a))})}}),this.filters=this.filters.concat(c)},f.prototype.flatten=function(){for(var a,b=[],c=0;c<this.filters.length;c++)c>0&&b.push(this.name),a=this.filters[c],a.flatten?b.push(a.flatten()):b.push(a);return 1==b.length&&(b=b[0]),"NOT"==this.name?{NOT:b}:b};var g=function(a,b,c){this.fields="string"==typeof c?[c]:Utils.slice(c||[]),this.resource=a,this.operator=b instanceof f?b.clone():new f("AND",b),this._pageIndex=1,this._pageSize=20};return g.prototype.clone=function(){var a=new g(this.resource,this.operator.clone(),this.fields);return a._pageSize=this._pageSize,a._pageIndex=this._pageIndex,a.ordering=this.ordering,a},g.prototype.and=function(){var a=this.clone();return a.operator.filters.length?("AND"!=a.operator.name&&(a.operator=new f("AND",[a.operator])),a.operator.addFilters(arguments)):a.operator=new f("AND",arguments),a},g.prototype.filter=g.prototype.and,g.prototype.or=function(){var a=this.clone();return a.operator.filters.length?("OR"!=a.operator.name&&(a.operator=new f("OR",[a.operator])),a.operator.addFilters(arguments)):a.operator=new f("OR",arguments),a},g.prototype.not=function(){var a=this.clone();return a.operator.filters.length?"AND"==a.operator.name?a.operator.addFilters([new f("NOT",arguments)]):"NOT"==a.operator.name?a.operator.addFilters(arguments):(a.operator=new f("AND",[a.operator]),a.operator.addFilters([new f("NOT",[new f("AND",arguments)])])):a.operator=new f("NOT",[new f("AND",arguments)]),a},g.prototype.exclude=g.prototype.not,g.prototype.only=function(){var a=this.clone();return a.fields=Utils.slice(arguments),a},g.prototype.setPage=function(a,b){var c=parseInt(a,10),d=parseInt(b,10);if(isNaN(c)||c<1)throw new Error("Invalid page number: "+a);var e=this.clone();return e._pageIndex=c,isNaN(d)||(e._pageSize=d),e},g.prototype.setPageSize=function(a){var b=parseInt(a,10);if(isNaN(b)||b<1)throw new Error("Invalid page size: "+a);var c=this.clone();return c._pageSize=b,c},g.prototype.orderBy=function(){var a=this.clone();return a.ordering=Utils.map(arguments,function(a){return{field:"-"===a[0]?a.slice(1):a,order:"-"===a[0]?"desc":"asc"}}),a},g.prototype.fetch=function(a){var b,c=this,d=this.operator.flatten();if(a=a?Utils.extend({},a):{},!Utils.any(d,function(a){return"AND"!=a&&(Utils.isArray(a)||!Utils.isObject(a)||!!a.NOT)}))return b=[],Utils.each(d,function(a){Utils.isObject(a)&&Utils.each(a,function(a,c){b.push({name:c,value:a})})}),b.push({name:"page",value:this._pageIndex}),b.push({name:"limit",value:this._pageSize}),this.ordering&&this.ordering.length&&(b.push({name:"sort",value:this.ordering[0].field}),b.push({name:"order",value:this.ordering[0].order})),Utils.each(a,function(a,c){b.push({name:c,value:a})}),c.resource.all(b);var e={filters:d};return this.fields.length&&(e.fields=Utils.slice(this.fields)),b=Utils.extend(a,{__queryset__:JSON.stringify(e),page:this._pageIndex,limit:this._pageSize}),this.ordering&&this.ordering.length&&(b.sort=this.ordering[0].field,b.order=this.ordering[0].order),this.resource.all(b)},g}(),Resource=function(){var a=function(a){var b=this;if(a=a||{},b.client=a.client,b.client){if(!(b.client instanceof Client))throw new TypeError("You must pass a valid client instance, got an "+typeof b.client)}else b.client=new Client(a);b.initialize.apply(b,arguments)};return a.prototype.initialize=function(){},a.prototype.getUrl=function(){throw new TypeError("getUrl(): Abstract method, you need to override this method in a subclass")},a.prototype.validateId=function(a){var b=parseInt(a,10);if(isNaN(b))throw new TypeError('Identifier "'+a+'" is not a numeric value');return b},a.prototype.validateAttributes=function(a){return!0},a.prototype.get=function(a,b){var c,d=this;return a=d.validateId(a),c={url:d.getUrl(a),method:"GET"},b&&Object.getOwnPropertyNames(b).length&&(c.data=b),d.client.request(c)},a.prototype.create=function(a){var b,c,d,e=this;if(Utils.isArray(a))for(b=[],c=a.length-1;c>=0;c--)d=Utils.extend({},a[c]),delete d.id,e.validateAttributes(d),b.push(d);else b=Utils.extend({},a),delete b.id,e.validateAttributes(b);return e.client.request({url:e.getUrl(),method:"POST",data:JSON.stringify(b)})},a.prototype.save=function(a,b){var c,d,e,f,g=this;if(b=b&&(""+b).toUpperCase()||"PUT",Utils.isArray(a))for(c=[],d=a.length-1;d>=0;d--)e=Utils.extend({},a[d]),g.validateId(e.id),g.validateAttributes(e),c.push(e);else c=Utils.extend({},a),g.validateId(c.id),f=c.id,g.validateAttributes(c);return g.client.request({url:g.getUrl(f),method:b,data:JSON.stringify(a)})},a.prototype.delete=function(a){return this.client.request({url:this.getUrl(a),method:"DELETE"})},a.prototype.all=function(a){return this.client.request({url:this.getUrl(),method:"GET",data:a})},a.prototype.fetch=a.prototype.all,a.prototype.filter=function(){return new Query(this,arguments)},a.prototype.exclude=function(){var a=this.filter();return a.not.apply(a,Utils.slice(arguments))},a.prototype.setPage=function(){var a=this.filter();return a.setPage.apply(a,Utils.slice(arguments))},a.prototype.setPageSize=function(){var a=this.filter();return a.setPageSize.apply(a,Utils.slice(arguments))},a.prototype.orderBy=function(){var a=this.filter();return a.orderBy.apply(a,Utils.slice(arguments))},a}(),ChannelResource=function(){var a=function(){Resource.apply(this,arguments)};return Utils.extend(a.prototype,Resource.prototype,a.prototype),a.prototype.constructor=a,a.prototype.getUrl=function(a){a=Utils.undef(a)?a:this.validateId(a);var b="channel";return a&&(b+="/"+a),b},a}(),MediaResource=function(){var a=function(){Resource.apply(this,arguments)};return Utils.extend(a.prototype,Resource.prototype,a.prototype),a.prototype.constructor=a,a.prototype.getUrl=function(a){a=Utils.undef(a)?a:this.validateId(a);var b="media";return a&&(b+="/"+a),b},a}();"function"==typeof define&&define.amd?define("mobilerider-client",[],function(){return{Client:Client,Resource:Resource,Media:MediaResource,Channel:ChannelResource,Settings:Settings}}):(exports.mobilerider||(exports.mobilerider={}),exports.mobilerider.Client=Client,exports.mobilerider.Resource=Resource,exports.mobilerider.Media=MediaResource,exports.mobilerider.Channel=ChannelResource,exports.mobilerider.Settings=Settings)}(this);