/* Mobilerider API Client v | (c) 2014 Mobilerider Networks LLC. */
!function(exports,undefined){"use strict";var Requests=function(undefined){function handleReadyState(a,b,c){return function(){return a._aborted?c(a.request):void(a.request&&4==a.request[readyState]&&(a.request.onreadystatechange=noop,twoHundo.test(a.request.status)?b(a.request):c(a.request)))}}function setHeaders(a,b){var c,d=b.headers||{};d.Accept=d.Accept||defaultHeaders.accept[b.type]||defaultHeaders.accept["*"],b.crossOrigin||d[requestedWith]||(d[requestedWith]=defaultHeaders.requestedWith),d[contentType]||(d[contentType]=b.contentType||defaultHeaders.contentType);for(c in d)d.hasOwnProperty(c)&&"setRequestHeader"in a&&a.setRequestHeader(c,d[c])}function setCredentials(a,b){"undefined"!=typeof b.withCredentials&&"undefined"!=typeof a.withCredentials&&(a.withCredentials=!!b.withCredentials)}function generalCallback(a){lastValue=a}function urlappend(a,b){return a+(/\?/.test(a)?"&":"?")+b}function handleJsonp(a,b,c,d){var e=uniqid++,f=a.jsonpCallback||"callback",g=a.jsonpCallbackName||reqwest.getcallbackPrefix(e),h=new RegExp("((^|\\?|&)"+f+")=([^&]+)"),i=d.match(h),j=doc.createElement("script"),k=0,l=-1!==navigator.userAgent.indexOf("MSIE 10.0");return i?"?"===i[3]?d=d.replace(h,"$1="+g):g=i[3]:d=urlappend(d,f+"="+g),win[g]=generalCallback,j.type="text/javascript",j.src=d,j.async=!0,"undefined"==typeof j.onreadystatechange||l||(j.event="onclick",j.htmlFor=j.id="_reqwest_"+e),j.onload=j.onreadystatechange=function(){return j[readyState]&&"complete"!==j[readyState]&&"loaded"!==j[readyState]||k?!1:(j.onload=j.onreadystatechange=null,j.onclick&&j.onclick(),b(lastValue),lastValue=undefined,head.removeChild(j),void(k=1))},head.appendChild(j),{abort:function(){j.onload=j.onreadystatechange=null,c({},"Request is aborted: timeout",{}),lastValue=undefined,head.removeChild(j),k=1}}}function getRequest(a,b){var c,d=this.o,e=(d.method||"GET").toUpperCase(),f="string"==typeof d?d:d.url,g=d.processData!==!1&&d.data&&"string"!=typeof d.data?reqwest.toQueryString(d.data):d.data||null,h=!1;return"jsonp"!=d.type&&"GET"!=e||!g||(f=urlappend(f,g),g=null),"jsonp"==d.type?handleJsonp(d,a,b,f):(c=d.xhr&&d.xhr(d)||xhr(d),c.open(e,f,d.async===!1?!1:!0),setHeaders(c,d),setCredentials(c,d),win[xDomainRequest]&&c instanceof win[xDomainRequest]?(c.onload=a,c.onerror=b,c.onprogress=function(){},h=!0):c.onreadystatechange=handleReadyState(this,a,b),d.before&&d.before(c),h?setTimeout(function(){c.send(g)},200):c.send(g),c)}function Reqwest(a,b){this.o=a,this.fn=b,init.apply(this,arguments)}function setType(a){var b=a.match(/\.(json|jsonp|html|xml)(\?|$)/);return b?b[1]:"js"}function init(o,fn){function complete(a){for(o.timeout&&clearTimeout(self.timeout),self.timeout=null;self._completeHandlers.length>0;)self._completeHandlers.shift()(a)}function success(resp){resp="jsonp"!==type?self.request:resp;var filteredResponse=globalSetupOptions.dataFilter(resp.responseText,type),r=filteredResponse;try{resp.responseText=r}catch(e){}if(r)switch(type){case"json":try{resp=win.JSON?win.JSON.parse(r):eval("("+r+")")}catch(err){return error(resp,"Could not parse JSON in response",err)}break;case"js":resp=eval(r);break;case"html":resp=r;break;case"xml":resp=resp.responseXML&&resp.responseXML.parseError&&resp.responseXML.parseError.errorCode&&resp.responseXML.parseError.reason?null:resp.responseXML}for(self._responseArgs.resp=resp,self._fulfilled=!0,fn(resp),self._successHandler(resp);self._fulfillmentHandlers.length>0;)resp=self._fulfillmentHandlers.shift()(resp);complete(resp)}function error(a,b,c){for(a=self.request,self._responseArgs.resp=a,self._responseArgs.msg=b,self._responseArgs.t=c,self._erred=!0;self._errorHandlers.length>0;)self._errorHandlers.shift()(a,b,c);complete(a)}this.url="string"==typeof o?o:o.url,this.timeout=null,this._fulfilled=!1,this._successHandler=function(){},this._fulfillmentHandlers=[],this._errorHandlers=[],this._completeHandlers=[],this._erred=!1,this._responseArgs={};var self=this,type=o.type||setType(this.url);fn=fn||function(){},o.timeout&&(this.timeout=setTimeout(function(){self.abort()},o.timeout)),o.success&&(this._successHandler=function(){o.success.apply(o,arguments)}),o.error&&this._errorHandlers.push(function(){o.error.apply(o,arguments)}),o.complete&&this._completeHandlers.push(function(){o.complete.apply(o,arguments)}),this.request=getRequest.call(this,success,error)}function reqwest(a,b){return new Reqwest(a,b)}function normalize(a){return a?a.replace(/\r?\n/g,"\r\n"):""}function serial(a,b){var c,d,e,f,g=a.name,h=a.tagName.toLowerCase(),i=function(a){a&&!a.disabled&&b(g,normalize(a.attributes.value&&a.attributes.value.specified?a.value:a.text))};if(!a.disabled&&g)switch(h){case"input":/reset|button|image|file/i.test(a.type)||(c=/checkbox/i.test(a.type),d=/radio/i.test(a.type),e=a.value,(!(c||d)||a.checked)&&b(g,normalize(c&&""===e?"on":e)));break;case"textarea":b(g,normalize(a.value));break;case"select":if("select-one"===a.type.toLowerCase())i(a.selectedIndex>=0?a.options[a.selectedIndex]:null);else for(f=0;a.length&&f<a.length;f++)a.options[f].selected&&i(a.options[f])}}function eachFormElement(){var a,b,c=this,d=function(a,b){var d,e,f;for(d=0;d<b.length;d++)for(f=a[byTag](b[d]),e=0;e<f.length;e++)serial(f[e],c)};for(b=0;b<arguments.length;b++)a=arguments[b],/input|select|textarea/i.test(a.tagName)&&serial(a,c),d(a,["input","select","textarea"])}function serializeQueryString(){return reqwest.toQueryString(reqwest.serializeArray.apply(null,arguments))}function serializeHash(){var a={};return eachFormElement.apply(function(b,c){b in a?(a[b]&&!isArray(a[b])&&(a[b]=[a[b]]),a[b].push(c)):a[b]=c},arguments),a}function buildParams(a,b,c,d){var e,f,g,h=/\[\]$/;if(isArray(b))for(f=0;b&&f<b.length;f++)g=b[f],c||h.test(a)?d(a,g):buildParams(a+"["+("object"==typeof g?f:"")+"]",g,c,d);else if(b&&"[object Object]"===b.toString())for(e in b)buildParams(a+"["+e+"]",b[e],c,d);else d(a,b)}var win=window,doc=document,twoHundo=/^(20\d|1223)$/,byTag="getElementsByTagName",readyState="readyState",contentType="Content-Type",requestedWith="X-Requested-With",head=doc[byTag]("head")[0],uniqid=0,callbackPrefix="reqwest_"+ +new Date,lastValue,xmlHttpRequest="XMLHttpRequest",xDomainRequest="XDomainRequest",noop=function(){},isArray="function"==typeof Array.isArray?Array.isArray:function(a){return a instanceof Array},defaultHeaders={contentType:"application/x-www-form-urlencoded",requestedWith:xmlHttpRequest,accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"}},xhr=function(a){if(a.crossOrigin===!0){var b=win[xmlHttpRequest]?new XMLHttpRequest:null;if(b&&"withCredentials"in b)return b;if(win[xDomainRequest])return new XDomainRequest;throw new Error("Browser does not support cross-origin requests")}return win[xmlHttpRequest]?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")},globalSetupOptions={dataFilter:function(a){return a}};return Reqwest.prototype={abort:function(){this._aborted=!0,this.request.abort()},retry:function(){init.call(this,this.o,this.fn)},then:function(a,b){return a=a||function(){},b=b||function(){},this._fulfilled?this._responseArgs.resp=a(this._responseArgs.resp):this._erred?b(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):(this._fulfillmentHandlers.push(a),this._errorHandlers.push(b)),this},always:function(a){return this._fulfilled||this._erred?a(this._responseArgs.resp):this._completeHandlers.push(a),this},fail:function(a){return this._erred?a(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):this._errorHandlers.push(a),this}},reqwest.serializeArray=function(){var a=[];return eachFormElement.apply(function(b,c){a.push({name:b,value:c})},arguments),a},reqwest.serialize=function(){if(0===arguments.length)return"";var a,b,c=Array.prototype.slice.call(arguments,0);return a=c.pop(),a&&a.nodeType&&c.push(a)&&(a=null),a&&(a=a.type),b="map"==a?serializeHash:"array"==a?reqwest.serializeArray:serializeQueryString,b.apply(null,c)},reqwest.toQueryString=function(a,b){var c,d,e=b||!1,f=[],g=encodeURIComponent,h=function(a,b){b="function"==typeof b?b():null==b?"":b,f[f.length]=g(a)+"="+g(b)};if(isArray(a))for(d=0;a&&d<a.length;d++)h(a[d].name,a[d].value);else for(c in a)a.hasOwnProperty(c)&&buildParams(c,a[c],e,h);return f.join("&").replace(/%20/g,"+")},reqwest.getcallbackPrefix=function(){return callbackPrefix},reqwest.compat=function(a,b){return a&&(a.type&&(a.method=a.type)&&delete a.type,a.dataType&&(a.type=a.dataType),a.jsonpCallback&&(a.jsonpCallbackName=a.jsonpCallback)&&delete a.jsonpCallback,a.jsonp&&(a.jsonpCallback=a.jsonp)),new Reqwest(a,b)},reqwest.ajaxSetup=function(a){a=a||{};for(var b in a)globalSetupOptions[b]=a[b]},reqwest}(),Promises=function(a){function b(a){j(function(){throw a})}function c(b){return this.then(b,a)}function d(b){return this.then(a,b)}function e(b,c){return this.then(function(a){return k(b)?b.apply(null,l(a)?a:[a]):t.onlyFuncs?a:b},c||a)}function f(a){function b(){a()}return this.then(b,b),this}function g(a){return this.then(function(b){return k(a)?a.apply(null,l(b)?b.splice(0,0,undefined)&&b:[undefined,b]):t.onlyFuncs?b:a},function(b){return a(b)})}function h(c){return this.then(a,c?function(a){throw c(a),a}:b)}function i(a,b){var c=o(a);if(1===c.length&&l(c[0])){if(!c[0].length)return t.fulfilled([]);c=c[0]}var d=[],e=t(),f=c.length;if(f)for(var g=(function(a){c[a]=t.promisify(c[a]),c[a].then(function(g){a in d||(d[a]=b?c[a]:g,--f||e.resolve(d))},function(g){a in d||(b?(d[a]=c[a],--f||e.resolve(d)):e.reject(g))})}),h=0,i=f;i>h;h++)g(h);else e.resolve(d);return e.promise}var j,k=function(a){return"function"==typeof a},l=function(a){return Array.isArray?Array.isArray(a):a instanceof Array},m=function(a){return!(!a||!(typeof a).match(/function|object/))},n=function(b){return b===!1||b===a||null===b},o=function(a,b){return[].slice.call(a,b)},p="undefined",q=typeof TypeError===p?Error:TypeError;if(typeof process!==p&&process.nextTick)j=process.nextTick;else if(typeof MessageChannel!==p){var r=new MessageChannel,s=[];r.port1.onmessage=function(){s.length&&s.shift()()},j=function(a){s.push(a),r.port2.postMessage(0)}}else j=function(a){setTimeout(a,0)};var t=function(b){function i(){if(0!==s){var a,b=u,c=0,d=b.length,e=~s?0:1;for(u=[];d>c;c++)(a=b[c][e])&&a(p)}}function l(a){function b(a){return function(b){return c?undefined:(c=!0,a(b))}}var c=!1;if(s)return this;try{var d=m(a)&&a.then;if(k(d)){if(a===v)throw new q("Promise can't resolve itself");return d.call(a,b(l),b(o)),this}}catch(e){return b(o)(e),this}return r(function(){p=a,s=1,i()}),this}function o(a){return s||r(function(){try{throw a}catch(b){p=b}s=-1,i()}),this}var p,r=(a!==b?b:t.alwaysAsync)?j:function(a){a()},s=0,u=[],v={then:function(a,b){var c=t();return u.push([function(b){try{c.resolve(n(a)?b:k(a)?a(b):t.onlyFuncs?b:a)}catch(d){c.reject(d)}},function(a){if((n(b)||!k(b)&&t.onlyFuncs)&&c.reject(a),b)try{c.resolve(k(b)?b(a):b)}catch(d){c.reject(d)}}]),0!==s&&r(i),c.promise},success:c,error:d,otherwise:d,apply:e,spread:e,ensure:f,nodify:g,rethrow:h,isPending:function(){return!(0!==s)},getStatus:function(){return s},done:c,fail:d,always:f};return v.toSource=v.toString=v.valueOf=function(){return p===a?this:p},{promise:v,resolve:l,fulfill:l,reject:o}};return t.deferred=t.defer=t,t.nextTick=j,t.alwaysAsync=!0,t.onlyFuncs=!0,t.resolved=t.fulfilled=function(a){return t(!0).resolve(a).promise},t.rejected=function(a){return t(!0).reject(a).promise},t.wait=function(a){var b=t();return setTimeout(b.resolve,a||0),b.promise},t.delay=function(a,b){var c=t();return setTimeout(function(){try{c.resolve(a.apply(null))}catch(b){c.reject(b)}},b||0),c.promise},t.promisify=function(a){return a&&k(a.then)?a:t.resolved(a)},t.all=function(){return i(arguments,!1)},t.resolveAll=function(){return i(arguments,!0)},t.nodeCapsule=function(a,b){return b||(b=a,a=void 0),function(){var c=t(),d=o(arguments);d.push(function(a,b){a?c.reject(a):c.resolve(arguments.length>2?o(arguments,1):b)});try{b.apply(a,d)}catch(e){c.reject(e)}return c.promise}},{defer:t}}(),Settings=function(){return{endpointPrefix:"http://api.devmobilerider.com/api"}}(),Utils=function(){var a=Array.prototype.forEach,b=Array.isArray,c=Array.prototype.some,d=Object.prototype.toString,e=Array.prototype.map,f=b||function(){return"[object Array]"==d.call(obj)},g={},h=function(a){return a===Object(a)},i=function(a){return Array.prototype.slice.apply(a,Array.prototype.slice.call(arguments,1))},j=Object.keys||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b},k=function(b,c,d){if(null!==b&&"undefined"!=typeof b){var e,f;if(a&&b.forEach===a)b.forEach(c,d);else if(b.length===+b.length){for(e=0,f=b.length;f>e;e++)if(c.call(d,b[e],e,b)===g)return}else{var h=j(b);for(e=0,f=h.length;f>e;e++)c.call(d,b[h[e]],h[e],b)}}},l=function(a){return k(i(arguments,1),function(b){if(b)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])}),a},m=function(a){return a},n=function(a,b,d){b=b||m;var e=!1;return null===a?e:c&&a.some===c?a.some(b,d):(k(a,function(a,c,f){return e||(e=b.call(d,a,c,f))?g:void 0}),!!e)},o=function(a,b,c){var d=[];return null===a?d:e&&a.map===e?a.map(b,c):(k(a,function(a,e,f){d.push(b.call(c,a,e,f))}),d)};return{slice:i,extend:l,each:k,keys:j,isArray:f,isObject:h,any:n,some:n,map:o}}(),Client=function(){var a=function(a){if(this.options=Utils.extend({},a||{}),!this.options.appId||!this.options.appSecret)throw new Error("You must provide `appId` and `appSecret` in the options.")};return a.prototype._getRequestHeaders=function(){return{Authorization:"Basic "+btoa(unescape(encodeURIComponent(this.options.appId+":"+this.options.appSecret)))}},a.prototype.request=function(a){a=a||{};var b,c=["url","method"];for(b=c.length-1;b>=0;b--)if(!a.hasOwnProperty(c[b]))throw new Error("Missing the `"+c[b]+"` parameter");if(0!==a.url.indexOf(Settings.endpointPrefix))throw new Error("Invalid URL: "+a.url);if(-1==["get","post","put","delete"].indexOf(a.method.toLowerCase()))throw new Error("Invalid method: "+a.method);a=Utils.extend({type:"json",contentType:"application/json",headers:this._getRequestHeaders()},a);var d=Promises.defer();return Requests(a).then(function(a){var b,c;"object"!=typeof a?d.reject({success:!1,status:"Invalid response from the server",response:a+""}):a.success?(b=["success","object","objects"],c={meta:{}},Utils.each(a,function(d,e){"meta"!=e?-1!=b.indexOf(e)?c[e]=d:c.meta[e]=d:Utils.each(a.meta,function(a,b){c.meta[b]=a})}),d.resolve(c)):(b=["success","objects"],c={meta:{}},Utils.each(a,function(d,e){"meta"!=e?-1!=b.indexOf(e)?c[e]=d:c.meta[e]=d:Utils.each(a.meta,function(a,b){c.meta[b]=a})}),d.reject(c))},function(a){d.reject("("+a.status+") "+a.statusText+": "+a.responseText)}),d.promise},a}(),Query=function(){var a=["exact","iexact","contains","icontains","in","gt","gte","lt","lte","startswith","istartswith","endswith","iendswith","range","year","month","day","week_day","hour","minute","second","isnull","search","regex","iregex"],b={};Utils.each(a,function(a){b[a]=!0});var c=["number","string","boolean"],d=function h(a){if(Utils.isArray(a))return Utils.map(a,function(a){return h(a)});if(Utils.isObject(a)){var b;return a instanceof f?b=new f(a.name,h(a.filters)):(b={},Utils.each(a,function(a,c){b[c]=h(a)})),b}return-1==c.indexOf(typeof a)?Object.prototype.toString.call(a):a},e=function(a,b){var c;if(1==arguments.length)c=a;else{if(2!=arguments.length)throw new TypeError("Wrong argument count");c=[a,b]}var d={};return d[c[0]]=c[1],d},f=function(a,b){if(a=a.toUpperCase(),"AND"!=a&&"OR"!=a&&"NOT"!=a)throw new TypeError("Operator: Invalid operator name: "+a);var c=b&&b.length==+b.length;if("undefined"!=typeof b&&c&&"string"==typeof b)throw new TypeError("If present the `filters` parameter must be an Array");this.name=a,this.filters=[],this.addFilters(b||[])};f.prototype.clone=function(){return new f(this.name,d(this.filters))},f.prototype.validateField=function(a){var c=a.split("__"),d=Utils.any(Utils.slice(c,0,-1),function(a){return!!b[a]});if(d)throw new TypeError("Field lookups can only be at the end if present. Got: "+a);if(1==c.length&&b[c[0]])throw new TypeError("Invalid field name: "+c[0]);return!0},f.prototype.addFilters=function(a){var b=this,c=[];Utils.each(a,function(a,d){if(Utils.isArray(a)){if(2!=a.length)throw new TypeError('Filters must be in the form of `["field_name", "filter_value"]`. Got: '+a.toString());b.validateField(a[0]),c.push(e(a))}else if(a instanceof f)c.push(a.clone());else if("string"==typeof d)b.validateField(d),c.push(e(d,a));else{if(!Utils.isObject(a))throw new TypeError("Invalid filter: "+JSON.stringify(a));Utils.each(a,function(a,d){b.validateField(d),c.push(e(d,a))})}}),this.filters=this.filters.concat(c)},f.prototype.flatten=function(){for(var a,b=[],c=0;c<this.filters.length;c++)c>0&&b.push(this.name),a=this.filters[c],b.push(a.flatten?a.flatten():a);return 1==b.length&&(b=b[0]),"NOT"==this.name?{NOT:b}:b};var g=function(a,b,c){this.fields="string"==typeof c?[c]:Utils.slice(c||[]),this.resource=a,this.operator=b instanceof f?b.clone():new f("AND",b),this._pageIndex=1,this._pageSize=20};return g.prototype.clone=function(){var a=new g(this.resource,this.operator.clone(),this.fields);return a._pageSize=this._pageSize,a._pageIndex=this._pageIndex,a},g.prototype.and=function(){var a=this.clone();return a.operator.filters.length?("AND"!=a.operator.name&&(a.operator=new f("AND",[a.operator])),a.operator.addFilters(arguments)):a.operator=new f("AND",arguments),a},g.prototype.filter=g.prototype.and,g.prototype.or=function(){var a=this.clone();return a.operator.filters.length?("OR"!=a.operator.name&&(a.operator=new f("OR",[a.operator])),a.operator.addFilters(arguments)):a.operator=new f("OR",arguments),a},g.prototype.not=function(){var a=this.clone();return a.operator.filters.length?"AND"==a.operator.name?a.operator.addFilters([new f("NOT",arguments)]):"NOT"==a.operator.name?a.operator.addFilters(arguments):(a.operator=new f("AND",[a.operator]),a.operator.addFilters([new f("NOT",[new f("AND",arguments)])])):a.operator=new f("NOT",[new f("AND",arguments)]),a},g.prototype.exclude=g.prototype.not,g.prototype.only=function(){var a=this.clone();return a.fields=Utils.slice(arguments),a},g.prototype.setPage=function(a,b){var c=parseInt(a,10),d=parseInt(b,10);if(isNaN(c)||1>c)throw new Error("Invalid page number: "+a);var e=this.clone();return e._pageIndex=c,isNaN(d)||(e._pageSize=d),e},g.prototype.setPageSize=function(a){var b=parseInt(a,10);if(isNaN(b)||1>b)throw new Error("Invalid page size: "+a);var c=this.clone();return c._pageSize=b,c},g.prototype.fetch=function(){var a=this,b=this.operator.flatten();if(!Utils.any(b,function(a){return"AND"!=a&&(Utils.isArray(a)||!Utils.isObject(a)||!!a.NOT)})){var c=[];return Utils.each(b,function(a){Utils.isObject(a)&&Utils.each(a,function(a,b){c.push({name:b,value:a})})}),c.push({name:"page",value:this._pageIndex}),c.push({name:"limit",value:this._pageSize}),a.resource.all(c)}var d={filters:b};return this.fields.length&&(d.fields=Utils.slice(this.fields)),this.resource.all({__queryset__:JSON.stringify(d),page:this._pageIndex,limit:this._pageSize})},g}(),Resource=function(){var a=function(a){if(a=a||{},this.client=a.client,this.client){if(!(this.client instanceof Client))throw new TypeError("You must pass a valid client instance, got an "+typeof this.client)}else{if(!a.appId||!a.appSecret)throw new Error("You must pass a `Client` instance or `appId` and `appSecret`.");this.client=new Client({appId:a.appId,appSecret:a.appSecret})}this.initialize.apply(this,arguments)};return a.prototype.initialize=function(){},a.prototype.getUrl=function(){throw new TypeError("getUrl(): Abstract method, you need to override this method in a subclass")},a.prototype.validateId=function(a){var b=parseInt(a,10);if(isNaN(b))throw new TypeError('Identifier "'+a+'" is not a numeric value');return b},a.prototype.validateAttributes=function(){return!0},a.prototype.get=function(a){return a=this.validateId(a),this.client.request({url:this.getUrl(a),method:"GET"})},a.prototype.create=function(a){var b,c,d;if(Utils.isArray(a))for(b=[],c=a.length-1;c>=0;c--)d=Utils.extend({},a[c]),delete d.id,this.validateAttributes(d),b.push(d);else b=Utils.extend({},a),delete b.id,this.validateAttributes(b);return this.client.request({url:this.getUrl(),method:"POST",data:JSON.stringify(b)})},a.prototype.save=function(a){var b,c,d,e;if(Utils.isArray(a))for(b=[],c=a.length-1;c>=0;c--)d=Utils.extend({},a[c]),this.validateId(d.id),this.validateAttributes(d),b.push(d);else b=Utils.extend({},a),this.validateId(b.id),e=b.id,this.validateAttributes(b);return this.client.request({url:this.getUrl(e),method:"PUT",data:JSON.stringify(a)})},a.prototype.delete=function(a){return this.client.request({url:this.getUrl(a),method:"DELETE"})},a.prototype.all=function(a){return this.client.request({url:this.getUrl(),method:"GET",data:a})},a.prototype.fetch=a.prototype.all,a.prototype.filter=function(){return new Query(this,arguments)},a.prototype.exclude=function(){var a=this.filter();return a.not.apply(a,Utils.slice(arguments))},a.prototype.setPage=function(){var a=this.filter();return a.setPage.apply(a,Utils.slice(arguments))},a.prototype.setPageSize=function(){var a=this.filter();return a.setPageSize.apply(a,Utils.slice(arguments))},a}(),ChannelResource=function(){var a=function(){Resource.apply(this,arguments)};return Utils.extend(a.prototype,Resource.prototype,a.prototype),a.prototype.constructor=a,a.prototype.getUrl=function(a){a="undefined"!=typeof a?this.validateId(a):a;var b=Settings.endpointPrefix+"/channel";return"/"!=b[b.length-1]&&a&&(b+="/"+a),b},a}(),MediaResource=function(){var a=function(){Resource.apply(this,arguments)};return Utils.extend(a.prototype,Resource.prototype,a.prototype),a.prototype.constructor=a,a.prototype.getUrl=function(a){a="undefined"!=typeof a?this.validateId(a):a;var b=Settings.endpointPrefix+"/media";return"/"!=b[b.length-1]&&a&&(b+="/"+a),b},a}();"function"==typeof define&&define.amd?define("mobilerider-client",[],function(){return{Client:Client,Resource:Resource,Media:MediaResource,Channel:ChannelResource}}):(exports.mobilerider||(exports.mobilerider={}),exports.mobilerider.Client=Client,exports.mobilerider.Resource=Resource,exports.mobilerider.Media=MediaResource,exports.mobilerider.Channel=ChannelResource)}(this);